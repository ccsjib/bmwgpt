# AI Generated Content Disclaimer
The code within this file was originally generated by Google Gemini.

(async function downloadAllLinks() {
// 1. SELECTORS: Targeted filter
    // We get all links, then filter specifically for the pattern in your logs
    const allLinks = Array.from(document.querySelectorAll('a[href]'));

    const validLinks = allLinks
        .map(link => link.href)
        .filter(href => {
            // Must contain "/techarticles/" (works for any car model)
            const isTechArticle = href.includes('/techarticles/');
            
            // Must end in .htm or .html (ignores folder links or breadcrumbs)
            const isHtmlFile = /\.(htm|html)$/i.test(href);
            
            return isTechArticle && isHtmlFile;
        });

    // Remove duplicates
    const uniqueLinks = [...new Set(validLinks)];

    console.log(`Found ${uniqueLinks.length} links. Starting download...`);

    // 2. DELAY HELPER: Prevents crashing the browser or triggering rate limits
    const wait = (ms) => new Promise(resolve => setTimeout(resolve, ms));

    // 3. DOWNLOAD LOOP
    for (let i = 0; i < uniqueLinks.length; i++) {
        const url = uniqueLinks[i];
        
        try {
            console.log(`Downloading (${i + 1}/${uniqueLinks.length}): ${url}`);

            // Fetch the HTML content
            const response = await fetch(url);
            
            // Check if fetch was successful
            if (!response.ok) throw new Error(`Status ${response.status}`);
            
            const content = await response.text();

            // Create a blob (virtual file) from the content
            const blob = new Blob([content], { type: 'text/html' });
            const blobUrl = URL.createObjectURL(blob);

            // Create a temporary link to trigger the download
            const a = document.createElement('a');
            a.href = blobUrl;
            
            // Try to name the file based on the URL, or fallback to index number
            const fileName = url.split('/').pop().split('?')[0] || `page_${i}.html`;
            a.download = fileName.endsWith('.html') ? fileName : `${fileName}.html`;
            
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            
            // Clean up memory
            URL.revokeObjectURL(blobUrl);

        } catch (err) {
            console.error(`Failed to download ${url}:`, err.message);
            // Most likely a CORS error if the domain is different
        }

        // Wait 1 second between downloads to be polite and avoid freezing the browser
        await wait(1000);
    }
    
    console.log("Job complete.");
})();